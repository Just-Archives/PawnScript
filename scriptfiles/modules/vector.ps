/*
*
*  	PawnScript
*
* 	Test File
*   Brace Inc.
*
*
*/

std::writeln("vector.ps loaded");

vector<324>vectorname; // 	An initial size can be a completely random number,
// 							because the size updates dynamically during the runtime.

// `using vector` is already in stdlib.ps
vector.add(vectorname,1);
vector.add(vectorname,312);
vector.add(vectorname,2);
new.int,vectortest=0;

console.rawout(sizeof?vectorname); // Size is changed from 324 to 3.
foreach.int,vectortest,vectorname->std::writeln("vector test #1 {vectortest}");

vector.remove(vectorname,312);

console.rawout(sizeof?vectorname); // Size is changed from 3 to 2.
foreach.int,vectortest,vectorname->std::writeln("vector test #2 {vectortest}");


namespace,vectors;
{
	vector<324>myvec;
	new.int,vectortest2=0;
}

vector.add(vectors::myvec,24);
vector.add(vectors::myvec,31);
vector.add(vectors::myvec,29);

console.rawout(sizeof?vectors::myvec); // Size is changed from 324 to 3.
foreach.int,vectors::vectortest2,vectors::myvec->std::writeln("vector test #3 {vectors::vectortest2}");

vector.remove(vectors::myvec,24);

console.rawout(sizeof?vectors::myvec); // Size is changed from 3 to 2.
foreach.int,vectors::vectortest2,vectors::myvec->std::writeln("vector test #4 {vectors::vectortest2}");

//new.int,t?stvar$=0;
//#emit:lol,1;
//#emit:addrset,NINJAGOOOO@@j;
new.int,hey=9;
#emit:addrset,addressof?hey; // Store the ADDRESS of 'hey' into cur and sec registers
#emit:const.alt,2; // Store 2 into alternate register
#emit:load.pri; // Store the VALUE of 'hey' into primary register
#emit:add; // pri = pri+alt
#emit:stor.pri; // store the value of primary register into the address found in cur and sec registers.
// Alternate way of updating the value is just by using the `vlset` instruction
console.rawout.log(hey); // Raw output 